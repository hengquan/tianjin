<!DOCTYPE html>
<html lang="en" style="overflow-x:hidden;">
<head>
<meta charset="UTF-8">
<title>模拟实操</title>
<!-- https 联通正式
<script type="text/javascript" src="https://ocap.shangwuju.tj.gov.cn/moni_api/web/js/jquery-1.12.4.js"></script>
<script type="text/javascript" src="https://ocap.shangwuju.tj.gov.cn/moni_api/web/bootstrap/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://ocap.shangwuju.tj.gov.cn/moni_api/web/bootstrap/css/bootstrap.css">
-->

<!-- http 本地开发+试运行
<script type="text/javascript" src="./web/js/jquery-1.12.4.js"></script>
<script type="text/javascript" src="./web/bootstrap/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="./web/bootstrap/css/bootstrap.css">
-->

<!-- http 移动正式
<script type="text/javascript" src="http://117.131.199.80/ot-server/web/js/jquery-1.12.4.js"></script>
<script type="text/javascript" src="http://117.131.199.80/ot-server/web/bootstrap/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="http://117.131.199.80/ot-server/web/bootstrap/css/bootstrap.css">
-->

<!-- http 本地开发-->
<script type="text/javascript" src="./web/js/jquery-1.12.4.js"></script>
<script type="text/javascript" src="./web/bootstrap/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="./web/bootstrap/css/bootstrap.css">
<style>
body {
  background: white;
}
.enterBtn {
  font-size: 14px;
  text-align: center;
  width: 160px;
  height: 30px;
  background: #f46227;
  color: white;
  line-height: 20px;
  border-radius: 3px;
  cursor: pointer;
}
.col-md-3 .explain {
  width: 230px;
  height: 100px;
  background: #f8f8f8;
  border-radius: 0 0 5px 5px;
}
.col-md-3 p {
  font-size: 18px;
}
.imgMsg {
  width: 230px;
  height: 175px;
}
.enterBtn {
  font-size: 14px;
  text-align: center;
  width: 160px;
  height: 30px;
  background: #f46227;
  color: white;
  line-height: 30px;
  margin: 10px auto 0;
  border-radius: 3px;
  cursor: pointer;
}
.position_wrap {
  height: 88px;
  line-height: 88px;
  font-size: 22px;
  letter-spacing: 1.2px;
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  box-sizing: content-box;
}
.container span {
  color: #888888;
}
.container .active {
  color: #888888;
  text-decoration: none;
}
.container .list-header-active {
  color: #3D7EEA;
}
#mnscContent {
  background-color: #eeeeee;
}
.container {
  width: 1200px;
  margin: 0 auto;
  position: relative;
}
.cat_title {
  background-color: #eeeeee;
  border-bottom: 1px solid #0f51bb;
  height: 40px;
  line-height: 40px;
  font-size: 18px;
  color: rgb(51, 51, 51);
  padding-left:15px;
}
.cat_title_ {
  border-bottom: 1px solid #0f51bb;
}
</style>
</head>

<body>
  <div id="message">
    <!--主菜单内容-->
    <div class="container">
      <!-- 站内导航 -->
      <div class="position_wrap">
        <div class="w1200 list-header">
          <!-- 正式移动      <img src="http://117.131.199.80/ot-server/web/images/dot.png" alt="" class="list-header-mark">&emsp;-->
          <!-- 本地_试运行 <img src="./web/images/dot.png" alt="" class="list-header-mark">&emsp;-->
          <!-- *正式联通    <img src="https://ocap.shangwuju.tj.gov.cn/moni_api/web/images/dot.png" alt="" class="list-header-mark">&emsp;-->
          <img src="./web/images/dot.png" alt="" class="list-header-mark">&emsp;
          <span class="list-header-title"><a href="#" onclick="gotoSY()" class="active">首页</a></span><span>&gt;</span> <span class="list-header-active">模拟实操</span>
        </div>
      </div>
      <!--模拟实操内容-->
      <div id="mnscContent">
        <div class="cat_title"><strong>管理类</strong></div>
        <div class="tab-content" id="htmlContent" align="center"></div>
        <div>&nbsp;</div>
        <div class="cat_title"><strong>管理类</strong></div>
        <div class="tab-content" id="htmlContent2" align="center"></div>
        <div>&nbsp;</div>
      </div>
    </div>
  </div>
<script>
/*
var webGateway="";本地开发+试运行
var webGateway="http://117.131.199.80/ot-server"; 正式移动
var webGateway="https://ocap.shangwuju.tj.gov.cn/moni_api"; 正式联通
*/
var webGateway="";

window.onload = function() {
  resetHeight();
}
window.addEventListener('resize', resetHeight);
function resetHeight() {
  var winHeight = document.getElementById('message').offsetHeight;
  window.parent.postMessage(winHeight, '*');
}

function gotoSY() {
  //试运行
  //top.location.href = "http://60.28.236.138:8989/preview/outsidewai/";
  //正式
  //top.location.href = "https://ocap.shangwuju.tj.gov.cn/";
  //正式-移动
  //top.location.href = "http://117.131.199.86/preview/outsidewai/";
  //开发--空，没必要配置
}

var top = '<div class="tab-pane active tab_bottom"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 column">';
var btm = '</div></div>';

var classSort="";

//初始化
$(function() {
  resetHeight();
  setInterval(function() {
    resetHeight();
  }, 200);
  $("a[cateId='']").click();
  var data = {"portal" : "portal"};
  $.ajax({
    type : 'post',
    url : "./train/getMnscList",
    /* 移动正式+试运行+开发 url : "./train/getMnscList", */
    /* 正式联通  url : "https://ocap.shangwuju.tj.gov.cn/moni_api/train/getMnscList", */
    data : data,
    dataType : 'json',
    cache : false,
    success : function(data) {
      console.log(data);
      var returnCode = data.returnCode;
      if (returnCode == '00') {
        var html = '';
        var contentHtml = '';
        var dataList = data.data;

        var allHtml="";
        var oneItemHtml="";
        var oneLineHtml="";
        var oneCatHtml="";
        var oldCatName="";
        var catCount=0;
        for (var i = 0; i < dataList.length; i++) {
          //查主图片是否有值无值显示默认图
          var imgUrl = dataList[i].imgUrl;
          if (!imgUrl) {
            imgUrl = webGateway+"/web/images/mnsc_default.jpg";
            /* imgUrl = "./web/images/mnsc_default.jpg"; */
            /* imgUrl = "https://ocap.shangwuju.tj.gov.cn/moni_api/web/images/mnsc_default.jpg"; */
          }
          oneItemHtml=
            '<div class="col-md-3">'
          +   '<img class="imgMsg" src="'+ imgUrl +'" alt="">'
          +   '<div class="model_bg" onclick=toSimulation("' + dataList[i].mnscUrl + '?objId=' + dataList[i].id + '")></div>'
          +   '<div class="explain" style="border-top:2px solid rgb(52,83,145);">'
          +     '<p style="padding-top: 10px;">' + dataList[i].mnscName + '</p>'
          +     '<div class="enterBtn" style="margin-top:15px;" onclick=toSimulation("' + dataList[i].mnscUrl + '?objId=' + dataList[i].id + '")>进入实操</div>'
          +   '</div>'
          + '</div>';

          if (oldCatName!=dataList[i].catNames) {
            if (oneCatHtml) {
              if (oneLineHtml) {
                oneLineHtml+='</div></div>';
                oneCatHtml+=oneLineHtml;
              }
              oneCatHtml+="</div>";
              allHtml+=oneCatHtml;
            }
            oneCatHtml='<div class="cat_title">'+dataList[i].catNames+'</div><div class="tab-content" id="htmlContent" align="center">';

            catCount==0;
            oldCatName=dataList[i].catNames;
          }
          if (catCount%4==0) {//加一行
            if (oneLineHtml) oneLineHtml+='</div></div>';
            oneLineHtml='<div class="row" style="margin-top:20px"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 column">';
          }
          oneLineHtml+=oneItemHtml;
          catCount++;
//============
          html += '<div class="col-md-3">'
            + '<img class="imgMsg" src="'+ imgUrl +'" alt="">'
            + '<div class="model_bg" onclick=toSimulation("'
            + dataList[i].mnscUrl
            + '?objId='
            + dataList[i].id
            + '")></div>'
            + '<div class="explain" style="border-top:2px solid rgb(52,83,145);">'
            + '<p style="padding-top: 10px;">'
            + dataList[i].mnscName
            + '</p>'
            + '<div class="enterBtn" style="margin-top:15px;" onclick=toSimulation("'
            + dataList[i].mnscUrl + '?objId=' + dataList[i].id
            + '")>进入实操</div>' + '</div>' + '</div>';
          if ((i + 1) % 4 == 0) {
            contentHtml = contentHtml
              + '<div class="row" style="margin-top:20px">'
              + '<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 column">'
              + html + '</div>' + '</div>';
            html = '';
          } else {
            if (i >= dataList.length - 1) {
              contentHtml = contentHtml
                + '<div class="row" style="margin-top:20px">'
                + '<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 column">'
                + html + '</div>' + '</div>';
              html = '';
            }
          }
        }

        if (oneCatHtml) {
          if (oneLineHtml) {
            oneLineHtml+='</div></div>';
            oneCatHtml+=oneLineHtml;
          }
          oneCatHtml+="</div>";
          allHtml+=oneCatHtml;
        }
        
        $("#htmlContent").html(contentHtml);
        $("#htmlContent2").html(contentHtml);
//        $("#mnscContent").html(allHtml);
      } else {
        alert(data.messageInfo);
      }
    },
    error : function() { //失败回调函数
      alert("查询失败");
    }
  });
});

//进入模拟实操学习页面
function toSimulation(url) {
  var url=webGateway+"/mnscContent.html" + url.substr(url.indexOf("?"))+"&front=1";
  /* var url = "./mnscContent.html" + url.substr(url.indexOf("?"))+"&front=1"; */
  /* var url = "https://ocap.shangwuju.tj.gov.cn/moni_api/mnscContent.html" + url.substr(url.indexOf("?"))+"&front=1"; */
  window.open(url);
}
</script>
  <script type="text/javascript">
  var _gatherData = {};
  _gatherData.visitModuleId = "模拟实操列表";
  _gatherData.objType = "ts_mnsc";
  //_gatherData.objId=getUrlParam("id");
  (function() {
    var ma = document.createElement('script');
    ma.type = 'text/javascript';
    ma.async = true;
    ma.src=webGateway+"/tjsrc/js/ma.js";
    /* ma.src = "./tjsrc/js/ma.js"; */
    /* ma.src = "https://ocap.shangwuju.tj.gov.cn/moni_api/tjsrc/js/ma.js"; */
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ma, s);
  })();
</script>
</body>
</html>