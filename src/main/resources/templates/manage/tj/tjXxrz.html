<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>学习日志</title>
<!-- 1 bootstrap基础css -->
<link href="${gateway}/libs/bootstrap-3.3.7-dist/css/bootstrap.css"
  rel="stylesheet">
<!-- 2 table表格css -->
<link
  href="${gateway}/libs/bootstrap-3.3.7-dist/css/bootstrap-table.min.css"
  rel="stylesheet">
<!-- 3 treeview树css -->
<link
  href="${gateway}/libs/bootstrap-3.3.7-dist/css/bootstrap-treeview.min.css"
  rel="stylesheet">
<!-- 4 datetimepicker时间选择css -->
<link
  href="${gateway}/libs/bootstrap-3.3.7-dist/css/bootstrap-datetimepicker.min.css"
  rel="stylesheet">
<!-- 5 select选择框css -->
<link
  href="${gateway}/libs/bootstrap-3.3.7-dist/css/bootstrap-select.css"
  rel="stylesheet">
<!-- 6 fileinput上传文件css -->
<link href="${gateway}/libs/bootstrap-3.3.7-dist/css/fileinput.min.css"
  rel="stylesheet">
<!-- 7 icheck单选+多选css -->
<link href="${gateway}/libs/bootstrap-3.3.7-dist/css/icheck-blue.css"
  rel="stylesheet">
<!-- 8 Validator验证css -->
<link
  href="${gateway}/libs/bootstrap-3.3.7-dist/css/bootstrapValidator.min.css"
  rel="stylesheet">
<!-- 10 引入字体css -->
<link href="${gateway}/libs/bootstrap-3.3.7-dist/fonts/iconfont.css"
  rel="stylesheet">
<!-- 11 页面样式css -->
<link href="${gateway}/src/css/pt-main.css" rel="stylesheet">

<!-- 优先引入jquery1.12.4版本 -->
<script src="${gateway}/libs/jquery/jquery-1.12.4.js"></script>
<!-- 1 bootstrap基础js -->
<script src="${gateway}/libs/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
<!-- 2 table表格js -->
<script
  src="${gateway}/libs/bootstrap-3.3.7-dist/js/bootstrap-table.min.js"></script>
<!-- 3 table列表数据js simple-table -->
<script
  src="${gateway}/libs/bootstrap-3.3.7-dist/js/bootstrap-table-data.js"></script>
<!-- 4 treeview树js -->
<script
  src="${gateway}/libs/bootstrap-3.3.7-dist/js/bootstrap-treeview.js"></script>
<!-- 5 datetimepicker时间选择js -->
<script
  src="${gateway}/libs/bootstrap-3.3.7-dist/js/bootstrap-datetimepicker.js"></script>
<!-- 6 select选择框js -->
<script
  src="${gateway}/libs/bootstrap-3.3.7-dist/js/bootstrap-select.min.js"></script>
<!-- 7 fileinput上传文件js -->
<script src="${gateway}/libs/bootstrap-3.3.7-dist/js/fileinput.min.js"></script>
<!-- 8 fileinput中文包js -->
<script
  src="${gateway}/libs/bootstrap-3.3.7-dist/js/fileinput_locale_zh.js"></script>
<!-- 9 icheck单选+多选js -->
<script src="${gateway}/libs/bootstrap-3.3.7-dist/js/icheck.min.js"></script>
<!-- 10 Validator验证js -->
<script
  src="${gateway}/libs/bootstrap-3.3.7-dist/js/bootstrapValidator.min.js"></script>
<!-- 11 layer弹框js -->
<script src="${gateway}/libs/layer/layer.js"></script>
<!-- 9 layer弹框css -->
<link href="${gateway}/libs/layer/layer-new.css" rel="stylesheet">
<!-- 12 页面js -->
<script src="${gateway}/src/js/main.js"></script>

<style>
.datetimepicker-dropdown-bottom-right {
  margin-top: 2px;
}
</style>
</head>

<body>
  <div class="pt-page">
    <div class="pt-root-container">
      <!--主视口 -->
      <div class="pt-view pt-open" style="padding-left: 0px;">
        <!--带横线标题-->
        <div class="pt-bread">
          <h3>学习日志</h3>
          <!-- 添加展开按钮 -->
          <button type="button" id="ptsearchfilter" class="btn btn-primary pt-zkbtn">展开</button>
        </div>
        <div class="pt-main pt-padding">
          <!--搜索条-->
          <div class="pt-section-search">
            <div class="row clearfix">
              <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 column">
                <form class="form-inline">
                  <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                    <div class="form-group">
                      <label class="col-lg-4 col-md-4 col-sm-4 col-xs-4" for="userIds">类&emsp;&emsp;型</label>
                      <div id="date1" class="date col-lg-8 col-md-8 col-sm-8 col-xs-8">
                        <input type="text" class="form-control" id="objType" placeholder="类型">
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                    <div class="form-group">
                      <label class="col-lg-3 col-md-3 col-sm-3 col-xs-3" for="createTime">统计时间</label>
                      <div id="date1" class="date col-lg-9 col-md-9 col-sm-9 col-xs-9" style="margin-top:0px;" data-date="2018-09-30" data-date-format="yyyy-mm-dd">
                        <input class="form-control datetimepicker" name="begin" size="16" type="text" value="" style="padding-left:10px;">
                        <span class="add-on" style="height:40px"><i class="icon-th"></i></span>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                    <div class="form-group">
                      <label class="col-lg-1 col-md-1 col-sm-1 col-xs-1" for="createTime">~</label>
                      <div id="date2" class="date col-lg-11 col-md-11 col-sm-11 col-xs-11" style="margin-top:0px;" data-date="2018-09-30" data-date-format="yyyy-mm-dd">
                        <input class="form-control datetimepicker" name="end" size="16" type="text" value="" style="padding-left:10px;">
                        <span class="add-on" style="height:40px"><i class="icon-th"></i></span>
                      </div>
                    </div>
                  </div>

                  <!-- 隐藏部分包裹 -->
                  <span class="hiddenorshow pt-search-filter">
                  <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                    <div class="form-group">
                      <label class="col-lg-4 col-md-4 col-sm-4 col-xs-4" for="userIds"></label>
                      <div id="date1" class="date col-lg-8 col-md-8 col-sm-8 col-xs-8"></div>
                    </div>
                  </div>

                  <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                    <div class="form-group">
                      <label class="col-lg-4 col-md-4 col-sm-4 col-xs-4" for="userIds">模&emsp;&emsp;块</label>
                      <div id="date1" class="date col-lg-8 col-md-8 col-sm-8 col-xs-8">
                        <input type="text" class="form-control" id="objType" placeholder="模块">
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                    <div class="form-group">
                      <label class="col-lg-3 col-md-3 col-sm-3 col-xs-3" for="createTime">企&emsp;&emsp;业</label>
                      <div id="date1" class="date col-lg-8 col-md-8 col-sm-8 col-xs-8">
                        <input type="text" class="form-control" id="objType" placeholder="企业">
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                    <div class="form-group">
                      <label class="col-lg-3 col-md-3 col-sm-3 col-xs-3" for="createTime">人&emsp;&emsp;员</label>
                      <div id="date1" class="date col-lg-8 col-md-8 col-sm-8 col-xs-8">
                        <input type="text" class="form-control" id="objType" placeholder="人员">
                      </div>
                    </div>
                  </div>

                  </span>
                  <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                    <div class="form-group">
                      <button type="button" class="btn btn-default btn-primary w120" onclick="search()">搜索</button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <!--内容区容器-->
          <div class="pt-main">
            <!--bootstrap 表格-->
            <div class="row">
              <div class="col-sm-12">
                <div class="table-wrap">
                  <table id="tb_departments"></table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--主视口 结束-->
    </div>
  </div>

<script>
$(function() {
  $(".dropdown-menu").on('click', function (e) {
    e.stopPropagation();
  });
  //时间选择
  $('.datetimepicker').datetimepicker({
    language: 'zh',
    format: 'yyyy-mm-dd',
    minView: "month",
    pickDate: true,
    pickTime: false,
    todayBtn: true,
    autoclose: true
  });

  //搜索扩展
  $("#ptsearchfilter").click(function() {
    $(this).text($(".hiddenorshow").is(":hidden") ? "收起" : "展开");
    $(".hiddenorshow").toggleClass('pt-search-filter');
  });

});

//搜索
function search() {
  $("#tb_departments").bootstrapTable('refresh',{pageNumber:1});
}
function refresh() {
  $("#tb_departments").bootstrapTable('refresh');
}
function lookItem(e) {
  layer.open({
    type : 2,//0（信息框，默认）1（页面层）2（iframe层）3（加载层）4（tips层）
    title : '<span class="text-color">查看分类信息</span>',//请修改span中间的内容
    shadeClose : true,//开启阴影关闭
    closeBtn : 1, //不显示关闭按钮
    shade : 0.6,
    maxmin : false,//开启最大化最小化按钮
    area : [ '60%', '80%' ],//此处可以改为100%，该数值按UI图比例算出
    content : '${gateway}/cate/view?id='+e//如果不想出现滚动条['content.html', 'no']
  });
}

TableInit(queryParams).Init('${gateway}/tj/getXxrzList?${urlParam}', [
{
  field : 'objType',
  title : '类型',
  sortable : false
}, {
  field : 'moduleName',
  title : '模块',
  sortable : false
}, {
  field : 'objName',
  title : '对象名称',
  sortable : false
}, {
  field : 'groupName',
  title : '企业',
  sortable : false
}, {
  field : 'userName',
  title : '人员',
  sortable : false
}, {
  field : 'createdate',
  title : '时间',
  sortable : false
}
]);

function queryParams(params) {
  var selectedValues = [];
  var count=$("#userIds option").length;
  for(var i=0;i<count;i++){
    if ($("#userIds").get(0).options[i].selected) {
      selectedValues.push($("#userIds").get(0).options[i].value);
    }
  }
  var data={
    //组织其他参数
    userIds: selectedValues.join(","),
    date1: $("#date1").find("input").val(),
    date2: $("#date2").find("input").val(),
    limit : params.limit, //页面大小
    offset : params.offset //页码
  };
  console.log(data);
  return data;
}

function formatNumAlignRight(value) {
  return '<span style="padding-right:15x;">'+value+'</span>'
}
</script>
</body>
</html>