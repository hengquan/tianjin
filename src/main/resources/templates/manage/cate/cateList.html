<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>列表页</title>
  <!-- 1 bootstrap基础css -->
  <link href="./libs/bootstrap-3.3.7-dist/css/bootstrap.css" rel="stylesheet">
  <!-- 2 table表格css -->
  <link href="./libs/bootstrap-3.3.7-dist/css/bootstrap-table.min.css" rel="stylesheet">
  <!-- 3 treeview树css -->
  <link href="./libs/bootstrap-3.3.7-dist/css/bootstrap-treeview.min.css" rel="stylesheet">
  <!-- 4 datetimepicker时间选择css -->
  <link href="./libs/bootstrap-3.3.7-dist/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
  <!-- 5 select选择框css -->
  <link href="./libs/bootstrap-3.3.7-dist/css/bootstrap-select.css" rel="stylesheet">
  <!-- 6 fileinput上传文件css -->
  <link href="./libs/bootstrap-3.3.7-dist/css/fileinput.min.css" rel="stylesheet">
  <!-- 7 icheck单选+多选css -->
  <link href="./libs/bootstrap-3.3.7-dist/css/icheck-blue.css" rel="stylesheet">
  <!-- 8 Validator验证css -->
  <link href="./libs/bootstrap-3.3.7-dist/css/bootstrapValidator.min.css" rel="stylesheet">
  <!-- 9 layer弹框css -->
  <link href="./libs/layer/layer-new.css" rel="stylesheet" >
  <!-- 10 引入字体css -->
  <link href="./libs/bootstrap-3.3.7-dist/fonts/iconfont.css" rel="stylesheet">
  <!-- 11 页面样式css -->
  <link href="./src/css/pt-main.css" rel="stylesheet" >

  <!-- 优先引入jquery1.12.4版本 -->
  <script src="./libs/jquery/jquery-1.12.4.js"></script>
  <!-- 1 bootstrap基础js -->
  <script src="./libs/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
  <!-- 2 table表格js -->
  <script src="./libs/bootstrap-3.3.7-dist/js/bootstrap-table.min.js"></script>
  <!-- 3 table列表数据js simple-table -->
  <script src="./libs/bootstrap-3.3.7-dist/js/bootstrap-table-data.js"></script>
  <!-- 4 treeview树js -->
  <script src="./libs/bootstrap-3.3.7-dist/js/bootstrap-treeview.js"></script>
  <!-- 5 datetimepicker时间选择js -->
  <script src="./libs/bootstrap-3.3.7-dist/js/bootstrap-datetimepicker.js"></script>
  <!-- 6 select选择框js -->
  <script src="./libs/bootstrap-3.3.7-dist/js/bootstrap-select.min.js"></script>
  <!-- 7 fileinput上传文件js -->
  <script src="./libs/bootstrap-3.3.7-dist/js/fileinput.min.js"></script>
  <!-- 8 fileinput中文包js -->
  <script src="./libs/bootstrap-3.3.7-dist/js/fileinput_locale_zh.js"></script>
  <!-- 9 icheck单选+多选js -->
  <script src="./libs/bootstrap-3.3.7-dist/js/icheck.min.js"></script>
  <!-- 10 Validator验证js -->
  <script src="./libs/bootstrap-3.3.7-dist/js/bootstrapValidator.min.js"></script>
  <!-- 11 layer弹框js -->
  <script src="./libs/layer/layer.js"></script>
  <!-- 12 页面js -->
  <script src="./src/js/main.js"></script>
</head>

<body>
<div class="pt-page">
    <div class="pt-root-container">
        <!--主视口 -->
        <div class="pt-view pt-open" style="padding-left: 0px;">
            <!--带横线标题-->
            <div class="pt-bread">
                <h3>分类管理</h3>
                <!-- 添加展开按钮 -->
                <button type="button" id="ptsearchfilter" class="btn btn-primary pt-zkbtn">展开</button>
            </div>
            <div class="pt-main pt-padding">
                <!--搜索条-->
                <div class="pt-section-search">
                    <div class="row clearfix">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 column">
                            <form class="form-inline">
                                <!-- 示例 input-->
                                <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                                    <div class="form-group">
                                        <label class="col-lg-4 col-md-4 col-sm-4 col-xs-6" for="keyword">模糊查找</label>
                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-6">
                                            <input type="text" class="form-control" id="keyword" placeholder="关键词">
                                        </div>
                                    </div>
                                </div>
                                <!-- 隐藏部分包裹 -->
                                <span class="hiddenorshow pt-search-filter">
                                    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <label class="col-lg-4 col-md-4 col-sm-4 col-xs-6" for="cataName">名称</label>
                                            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-6">
                                                <input type="text" class="form-control" id="cataName" placeholder="分类名称">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                          <label class="col-lg-4 col-md-4 col-sm-4 col-xs-6" for="lunch">上级分类</label>
                                          <div class="col-lg-8 col-md-8 col-sm-8 col-xs-6">
                                            <select id="lunch" multiple class="selectpicker" data-actions-box="true"  data-live-search="true" title="请选择">
                                                <option>操作1</option>
                                                <option>操作2</option>
                                                <option>操作3</option>
                                            </select>
                                          </div>
                                        </div>
                                    </div>
                                    <!-- 示例时间选择 -->
                                    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <label class="col-lg-4 col-md-4 col-sm-4 col-xs-6" for="createTime">创建时间</label>
                                            <div class="date datetimepicker col-lg-8 col-md-8 col-sm-8 col-xs-6" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
                                                <input class="form-control" size="16" type="text" value="">
                                                <span class="add-on" style="height: 40px"><i class="icon-th"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- 示例时间区间选择 -->
                                    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <label class="col-lg-4 col-md-4 col-sm-4 col-xs-6" for="exampleInputName2">从</label>
                                            <div class="date datetimepicker col-lg-8 col-md-8 col-sm-8 col-xs-6" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
                                                <input class="form-control" size="16" type="text" value="">
                                                <span class="add-on" style="height: 40px"><i class="icon-th"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <label class="col-lg-4 col-md-4 col-sm-4 col-xs-6" style="text-align: center">到</label>
                                            <div class="date datetimepicker col-lg-8 col-md-8 col-sm-8 col-xs-6" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
                                                <input class="form-control" size="16" type="text" value="">
                                                <span class="add-on" style="height: 40px"><i class="icon-th"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                </span>
                                <!-- 示例搜索按钮 -->
                                <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                                    <div class="form-group">
                                        <button type="button" class="btn btn-default btn-primary w120">搜索</button>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <div class="column pt-btn-line">
                            <button type="button" class="btn w120 btn-default btn-primary" onclick='editItem()'>新增</button>
                            <!--
                            <button type="button" class="btn w120 btn-default">批量停用</button>
                            <button type="button" class="btn w120 btn-default">批量启用</button>
                            <button type="button" class="btn w120 btn-default btn-danger-ly">批量删除</button>-->
                        </div>
                    </div>
                </div>
                <!--内容区容器-->
                <div class="pt-main">
                    <!--bootstrap 表格-->
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="table-wrap">
                                <table id="tb_departments"></table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--主视口 结束-->
    </div>
</div>

<script src="./src/js/pt-tree.js"></script>
<script>
// 时间选择
$('.datetimepicker').datetimepicker({
    language : 'zh',
    format : 'yyyy-mm-dd hh:ii:ss',
    todayBtn : true,
    autoclose : true
});
//搜索扩展
$("#ptsearchfilter").click(function() {
    $(this).text($(".hiddenorshow").is(":hidden") ? "收起" : "展开");
    $(".hiddenorshow").toggleClass('pt-search-filter');
});
// table
// 2.返回操作模版[按钮颜色暂不确定]
function operateFormatter(value, row, index) {
    return [
        '<button type="button" class="RoleOflook btn btn-xs btn-default btn-link" onclick="lookItem('+index+')">查看</button>',
        '<button type="button" class="RoleOfedit btn btn-xs btn-default btn-link" onclick="editItem('+index+', 2)">修改</button>',
        '<button type="button" class="RoleOfdelete btn btn-xs btn-default btn-link-red" onclick="deleteItem('+index+')">删除</button>'
    ].join('');
}

// 操作模版调用的方法
function deleteItem(e) {
  alert('删除操作，序号' + e)
}

function editItem(e, type) {
  var title='新增分类信息';
  if (type==2) title='修改分类信息';
  layer.open({
    type: 2,//0（信息框，默认）1（页面层）2（iframe层）3（加载层）4（tips层）
    title: '<span class="text-color">'+title+'</span>',//请修改span中间的内容
    shadeClose: true,//开启阴影关闭
    closeBtn: 1, //不显示关闭按钮
    shade: 0.6,
    maxmin: false,//开启最大化最小化按钮
    area: ['80%', '83%'],//此处可以改为100%，该数值按UI图比例算出
    content: 'cate/edit'//如果不想出现滚动条['content.html', 'no']
  });
}

function lookItem(e) {
  alert(e);
  layer.open({
    type: 2,//0（信息框，默认）1（页面层）2（iframe层）3（加载层）4（tips层）
    title: '<span class="text-color">查看分类信息</span>',//请修改span中间的内容
    shadeClose: true,//开启阴影关闭
    closeBtn: 1, //不显示关闭按钮
    shade: 0.6,
    maxmin: false,//开启最大化最小化按钮
    area: ['80%', '83%'],//此处可以改为100%，该数值按UI图比例算出
    content: 'cate/view'//如果不想出现滚动条['content.html', 'no']
  });
}

function refresh() {
  alert("EEEE");
  $("#tb_departments").bootstrapTable('refresh');
}
var bt=TableInit().Init('/cate/getPageData',
[{
  field: 'name',
  title: '分类名称',
  sortable: true
},{
  field: 'parentName',
  title: '上级分类',
  sortable: true
},{
  field: 'sort',
  title: '本级排序',
  sortable: true
},{
  field: 'valid',
  title: '是否有效',
  sortable: true
},{
  field: 'createName',
  title: '创建者',
  sortable: true
},{
  field: 'createDate',
  title: '创建时间',
  sortable: true
},{
  field: 'methods',
  title: '操作',
  formatter: operateFormatter
}]);
</script>
</body>
</html>