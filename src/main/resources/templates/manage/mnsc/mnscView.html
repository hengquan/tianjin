<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>input</title>
<!-- 1 bootstrap基础css -->
<link href="${gateway}/libs/bootstrap-3.3.7-dist/css/bootstrap.css"
  rel="stylesheet">
<!-- 2 table表格css -->
<link href="${gateway}/libs/bootstrap-3.3.7-dist/css/bootstrap-table.min.css"
  rel="stylesheet">
<!-- 3 treeview树css -->
<link href="${gateway}/libs/bootstrap-3.3.7-dist/css/bootstrap-treeview.min.css"
  rel="stylesheet">
<!-- 4 datetimepicker时间选择css -->
<link
  href="${gateway}/libs/bootstrap-3.3.7-dist/css/bootstrap-datetimepicker.min.css"
  rel="stylesheet">
<!-- 5 select选择框css -->
<link href="${gateway}/libs/bootstrap-3.3.7-dist/css/bootstrap-select.css"
  rel="stylesheet">
<!-- 6 fileinput上传文件css -->
<link href="${gateway}/libs/bootstrap-3.3.7-dist/css/fileinput.min.css"
  rel="stylesheet">
<!-- 7 icheck单选+多选css -->
<link href="${gateway}/libs/bootstrap-3.3.7-dist/css/icheck-blue.css"
  rel="stylesheet">
<!-- 8 Validator验证css -->
<link href="${gateway}/libs/bootstrap-3.3.7-dist/css/bootstrapValidator.min.css"
  rel="stylesheet">
<!-- 9 layer弹框css -->
<link href="${gateway}/libs/layer/layer-new.css" rel="stylesheet">
<!-- 10 引入字体css -->
<link href="${gateway}/libs/bootstrap-3.3.7-dist/fonts/iconfont.css"
  rel="stylesheet">
<!-- 11 页面样式css -->
<link href="${gateway}/src/css/pt-main.css" rel="stylesheet">

<!-- 优先引入jquery1.12.4版本 -->
<script src="${gateway}/libs/jquery/jquery-1.12.4.js"></script>
<!-- 1 bootstrap基础js -->
<script src="${gateway}/libs/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
<!-- 2 table表格js -->
<script src="${gateway}/libs/bootstrap-3.3.7-dist/js/bootstrap-table.min.js"></script>
<!-- 2 table列表数据js 可删除？ -->
<script src="${gateway}/libs/bootstrap-3.3.7-dist/js/bootstrap-table-data.js"></script>
<!-- 3 treeview树js -->
<script src="${gateway}/libs/bootstrap-3.3.7-dist/js/bootstrap-treeview.js"></script>
<!-- 4 datetimepicker时间选择js -->
<script
  src="${gateway}/libs/bootstrap-3.3.7-dist/js/bootstrap-datetimepicker.js"></script>
<!-- 5 select选择框js -->
<script src="${gateway}/libs/bootstrap-3.3.7-dist/js/bootstrap-select.min.js"></script>
<!-- 6 fileinput上传文件js -->
<script src="${gateway}/libs/bootstrap-3.3.7-dist/js/fileinput.min.js"></script>
<!-- 6 fileinput中文包js -->
<script src="${gateway}/libs/bootstrap-3.3.7-dist/js/fileinput_locale_zh.js"></script>
<!-- 7 icheck单选+多选js -->
<script src="${gateway}/libs/bootstrap-3.3.7-dist/js/icheck.min.js"></script>
<!-- 8 Validator验证js -->
<script src="${gateway}/libs/bootstrap-3.3.7-dist/js/bootstrapValidator.min.js"></script>
<!-- 9 layer弹框js -->
<script src="${gateway}/libs/layer/layer.js"></script>
<!-- 11 页面js -->
<script src="${gateway}/src/js/main.js"></script>
<style>
html {
  overflow-x: hidden;
  overflow-y: auto;
}
</style>
</head>
<body>
  <br>
  <br>
  <br>
  <div class="container">
    <div class="row clearfix">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 column">
        <form class="form-horizontal pt-form-full" role="form" id="form">
          <input type="hidden" name="mnscCatNames" id="mnscCatNames">
          <input type="hidden" name="id" id="objId">
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="form-group">
              <label class="col-lg-2 col-md-2 col-sm-2 col-xs-6" for="title">摸拟实操名称：</label>
              <div class="col-lg-8 col-md-8 col-sm-8 col-xs-6">
                <span id="mnscName"></span>
              </div>
            </div>
          </div>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="form-group">
              <label class="col-lg-2 col-md-2 col-sm-2 col-xs-6" for="dingjia">选择&emsp;&emsp;分类：</label>
              <div class="col-lg-8 col-md-8 col-sm-8 col-xs-6">
                <span id="mnscCatId"></span>
              </div>
            </div>
          </div>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="form-group">
              <label class="col-lg-2 col-md-2 col-sm-2 col-xs-6" for="title">摸拟实操URL：</label>
              <div class="col-lg-8 col-md-8 col-sm-8 col-xs-6">
                <span id="mnscUrl"></span>
              </div>
            </div>
          </div>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="form-group">
              <label class="col-lg-2 col-md-2 col-sm-2 col-xs-6" for="title">学&emsp;&emsp;&emsp;&emsp;分：</label>
              <div class="col-lg-8 col-md-8 col-sm-8 col-xs-6">
                <span id="score"></span>
              </div>
            </div>
          </div>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="form-group">
              <label class="col-lg-2 col-md-2 col-sm-2 col-xs-6" for="biaozhun">说&emsp;&emsp;&emsp;&emsp;明：</label>
              <div class="col-lg-8 col-md-8 col-sm-8 col-xs-6">
                <span id="remarks"></span>
              </div>
            </div>
          </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="form-group">
              <label class="col-lg-2 col-md-2 col-sm-2 col-xs-6" for="biaozhun">创建&emsp;&emsp;时间：</label>
              <div
                class="date datetimepicker col-lg-8 col-md-8 col-sm-8 col-xs-6">
                <span id="createDate"></span>
              </div>
            </div>
          </div>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="form-group">
              <div class="col-lg-10 col-md-10 col-sm-10 col-xs-6">
                <table class="table table-striped" id="theTable">
                </table>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <br>
  <br>
  <br>
  <script>
    $(function() {
      //获取参数
      var url = location.search;
      if (url != '') {
        url = url.substr(1);
        var split = url.split("=");
        $.ajax({
          type : 'post',
          url : "${gateway}/mnsc/get",
          data : {
            "id" : split[1]
          },
          dataType : 'json',
          cache : false,
          success : function(data) {
            var html = '<tr>'
              + '<th>课件名称</th>'
              + '<th>分类名称</th>'
              + '<th>学分</th>'
              + '<th>过期时间</th>'
              + '</tr>';
            var mnsc = data.data;
            $("#objId").html(mnsc.id);
            $("#mnscName").html(mnsc.mnscName);
            $("#mnscUrl").html(mnsc.mnscUrl);
            $("#createDate").html(mnsc.createDate);
            $("#score").html(mnsc.score);
            $("#remarks").html(mnsc.remarks);
            $("#mnscCatNames").html(mnsc.mnscCatNames);
            $("#mnscCatId").html(mnsc.mnscCatNames);
            //获取相关课件列表
            $("#kjids").val(mnsc.kjids);
            var dataList = mnsc.kjs;
            if(dataList!=null){
              for (var i = 0; i < dataList.length; i++) {
                html += '<tr>'
                    + '<td>'
                    + dataList[i].kjName
                    + '</td>'
                    + '<td>'
                    + dataList[i].kjCatNames
                    + '</td>'
                    + '<td>'
                    + dataList[i].score
                    + '</td>'
                    + '<td>'
                    + dataList[i].createDate
                    + '</td>'
                    + '</tr>';
              }
              $("#theTable").html(html);
            }
          },
          error : function() { //失败回调函数
            alert("获取信息失败");
          }
        });
      }
    });
    function closeMy() {
      var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
      parent.layer.close(index); //再执行关闭
    }
  </script>
</body>
</html>